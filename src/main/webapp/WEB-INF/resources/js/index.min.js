var edmundsVehicleInfo,selectedMake,selectedModel;$(document).ready(function(){var a=$(".navbar-floating-top").offset().top+$(".navbar-floating-top").height();$(window).scroll(function(){if($(window).scrollTop()>=a){$(".navbar-fixed-top").removeClass("hidden")}else{$(".navbar-fixed-top").addClass("hidden")}});$(document).on("click",".navbar-nav li",function(d){var c=$(this);var b=c.attr("data-link");$(".navbar-nav li").removeClass("active");$(".navbar-nav li[data-link='"+b+"']").addClass("active")});$(document).on("change","#contact-make",function(c){var b=$(this);toggleModel(false);toggleYear(false);if(b.val()!=""){edmundsVehicleInfo.makes.forEach(function(d){if(d.name==b.val()){selectedMake=d;updateModels(d.models)}});toggleModel(true)}});$(document).on("change","#contact-model",function(c){var b=$(this);toggleYear(false);if(b.val()!=""){selectedMake.models.forEach(function(d){if(d.name==b.val()){updateYears(d.years)}});toggleYear(true)}});renderGoogleMap();retrieveEdmundsInfo()});function retrieveEdmundsInfo(){var b="tb5dupgayccsg8jcu4dwcsb8";var a="https://api.edmunds.com/api/vehicle/v2/makes?view=basic&fmt=json&api_key=tb5dupgayccsg8jcu4dwcsb8";$.ajax({url:a,type:"GET",dataType:"json",success:function(c){edmundsVehicleInfo=c;updateMakes()},error:function(c){alert("An error occurred retrieving vehicle information from Edmunds API")}})}function updateMakes(){var a=$("#contact-make");a.html("");a.append($("<option>",{value:""}).text("Select Make"));edmundsVehicleInfo.makes.forEach(function(b){a.append($("<option>",{value:b.name}).text(b.name))});selectedMake=null;selectedModel=null}function updateModels(b){var a=$("#contact-model");a.html("");a.append($("<option>",{value:""}).text("Select Model"));b.forEach(function(c){a.append($("<option>",{value:c.name}).text(c.name))});selectedModel=null}function updateYears(a){var b=$("#contact-year");b.html("");b.append($("<option>",{value:""}).text("Select Year"));a.forEach(function(c){b.append($("<option>",{value:c.year}).text(c.year))})}function toggleModel(a){if(a==true){$("#contact-model").attr("disabled",false)}else{$("#contact-model").attr("disabled",true)}}function toggleYear(a){if(a==true){$("#contact-year").attr("disabled",false)}else{$("#contact-year").attr("disabled",true)}}function renderGoogleMap(){var f=$("#location")[0];var b={lat:32.902231,lng:-96.570547};var c={center:b,zoom:15,mapTypeId:google.maps.MapTypeId.ROADMAP};var h=new google.maps.Map(f,c);var e={placeId:"ChIJTYumoQOoToYRiRmXaeuw_Bc"};var d=$("#map-details-template").html();var g=new google.maps.InfoWindow();var a=new google.maps.places.PlacesService(h);a.getDetails(e,function(j,i){if(i==google.maps.places.PlacesServiceStatus.OK){var l=new google.maps.Marker({position:j.geometry.location,map:h,title:"Rowlett Glory Automotive"});d=d.replace(/{{name}}/g,j.name);d=d.replace(/{{line1}}/g,j.street_address);d=d.replace(/{{line2}}/g,j.postal_town+" "+j.postal_code);var k=new google.maps.InfoWindow({content:d});google.maps.event.addListener(l,"click",function(){g.open(h,l)})}})};